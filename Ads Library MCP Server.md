## MCP для поиска рекламы в Ads Library 

Сколько времени у вас занимает ручной поиск связок в библиотеке рекламы? Найти похуд на Францию займет меньше 30 минут? Перелопатить фитнес, курсы, приложения, миллионы читалок и другого мусора. Потом сменить ключевую фразу и по новой. 

**За эти полчаса можно дать AI команду и на автомате:** 

- прокрутить объявления по десяткам ключевых фраз в одном ГЕО;  
- загрузить тысячи активных объявлений;   
- отфильтровать их сначала скриптами, потом с Gemini;;  
- получить файл с очищенным списком объявлений. 

При этом не придется открывать Ads Library. Вся работа упрощена до «описал задачу — получил результат». Мы получаем раскадровку крео, все текста и ссылки на ФП, объяву и ленд. SPY работает по API внутри IDE на устройстве, но API-ключ от библиотеки не нужен. 

[https://youtu.be/GFb31fZcCV4](https://youtu.be/GFb31fZcCV4)   
Пример поиска: 4000+ объявлений из 11 ключевых фраз за 10-15 минут. 

В этой статье рассмотрим оригинал, с которого началось создание кастомного спая и покажем MCP под бесплатный Antigravity IDE. Версия сервера под Cursor и Claude будет во второй части. 

## Ads Library MCP Server

[Ads Library MCP Server](https://github.com/talknerdytome-labs/facebook-ads-library-mcp) предназначен для ресерча буквально в несколько кликов. Сервер ищет слово или фразу в названиях фанок. Затем со всех подходящих фанпейдж тянет объявления. 

![][image1]  
[Исследование подходов igaming направлений](https://docs.google.com/document/d/1QzlAtFunTiRMMHwMN51-O3jKJvxu8oiTFCKUjFKT3-E/edit?usp=sharing) на основе 400+ объявлений заняло меньше минуты. 

Решение полезное когда нужно парсить крупные бренды. Проблема в том что у арбитражников тысячи ФП и искать по ним бесполезно. А смотреть по ключевым фразам в тексте и крео инструмент не умеет, но мы его научим чуть позже.  

**![][image2]**

**Пример полного процесса с функционалом из коробки:**

1. **Пользователь:** "Найди рекламу Nike"  
2. **Поиск компаний:** система ищет страницы с названием, содержащим "Nike", и возвращает список с Platform ID.  
3. **Получение объявлений:** скрипт берет Platform ID (например, "Nike: 123456789") и запрашивает объявления этой страницы.  
4. **Результат:** пользователь видит список активных объявлений Nike с текстами, изображениями и датами.

## MySpy Antigravity

Переделанную версию Ads Library MCP Server обозначим как MySpy. 

Добавили функционал и слегка адаптировали под нутру: 

- ищет по ключам по аналогии с веб\-интерфейсом в библиотеке;  
- строго проверяет объявления в несколько этапов;   
- при фильтрации использует скрипты \+ Gemini для анализа креативов и текстов;  
- скидывает моментально читалки, приложения, внутренние ссылки соцсети и мусор без внешней линки;

Достойный IDE от Google с последними моделями Gemini и Claude. У Anti есть свои особенности для работы с MCP, он не поддерживает установку пакетов которые написаны под большинство вайб\-IDE. Поэтому пришлось убрать часть библиотек, местами заменить мозги на скрипты. Эта версия приложения выполняет ровно те же функции что и для Cursor и Claude, но другими способами. 

## 

### Установка MCP в Antigravity 

Если шарите, [откройте репу](https://github.com/whygithub7/MySpy-Antigravity) и ставьте. Инструкции ниже для не технарей. 

Откройте IDE в новой папке и вбейте промпт:  
*«Изучи репозиторий [https://github.com/whygithub7/MySpy-Antigravity](https://github.com/whygithub7/MySpy-Antigravity) и помоги его установить в текущую папку. Команды не пытайся запускать самостоятельно, возвращайся сюда по отдельности чтобы я скопировал в терминал. Давай начнем с проверки наличия питона».* 

Далее следуйте пошаговой инструкции агента. Если попробует выполнить сам команды и зависнет, прервите выполнение и напомните что так нельзя поступать. 

[*https://youtu.be/PsO5IoFmWqE*](https://youtu.be/PsO5IoFmWqE)   
На всякий случай показали весь процесс на видео.  

### Как использовать

1. откройте Anti и запросите поиск по N-количеству фраз нужное вам направление и отфильтровать;  
2. подождите пока закончится работа агента;   
3. найдите результаты в папке «results».

**Что с этим делать дальше уже опционально:**

- можете запросить функцию для консоли браузера которая запускает раз в 10 секунд 1 внешнюю ссылку из этого файла;  
- дать команду запустить по очереди все линки во внутреннем браузере;  
- отсортировать по наличию параметров трекера;  
- пройтись HTTP запросом и проанализировать все ссылки на наличие кло;  
- сгенерировать HTML с демонстрацией.

### Особенности поиска и фильтрации

Мы хотели решение в котором достаточно задать примитивный промпт и получить результат. Не стали раздувать сильно функционал чтобы не пришлось указывать в ТЗ режимы, параметры или теги. И чтобы другим пользователям не пришлось запоминать специфические инструкции. Только режим общения человеческим языком. 

**Поиск:**

- ищет в режиме широкого соответствия «Broad Match». Бот смотрит вхождения в любом порядке, даже если между ключами 10 других слов;  
- обходит «Pagination & Limits»: делает по 10 запросов чтобы выкачать всю выдачу;  
- извлекает ВСЕ карточки карусели, каждая обрабатывается отдельно;  
- ссылки извлекает из 8 мест, из CTA дополнительно достает UTM-параметры;  
- поддерживает базовые установки: страна, актив, ключевая фраза;  
- для экономии API берет 100 объявлений за запрос даже если указали 50\. Значение задается в промпте;  
- если включен анализ медиа, креативы падают в кэш в отдельную папку чтобы не засорять раб. пространство.

![][image3]  
*MySpy вычленяет URL из текста в описании.* 

#### Фильтрация — шаг 1: удаляет лишнее скриптами: 

- **has\_external\_links**: нет внешних ссылок вне соцсетей и Google;  
- **EXCLUDED\_DOMAINS**: домен указан в ЧС (маркетплейсы, бренды);  
- **дубли объяв:** сносятся с отметкой о количестве в «url\_occurrences»;  
- **EXCLUDED\_URL\_PATHS:** проверяются пути на наличие приставок /course/, /shop/, /fitness/;  
- **длина текстов:** описание \+ заг \> 4000 символов \= читалка.

#### Фильтрация шаг 2: смотрит глазами AI

- проверка текстов и крео через Gemini в облаке. LLM от Google решает подходит ли эта реклама под описанные критерии;  
- в случаях когда лимит по API в LLM исчерпан, этот этап пропускается. И тогда начинает сыпаться чуть больше не релевантной рекламы. Остальные фильтры продолжают работать.  

*Не пытайтесь скинуть агенту в IDE анализ крео. Это не позволят лимиты, особенности скриптов и общая логика работы MCP в IDE. Не превращайте мозги в инструмент.*  

![][image4]  
Агент сам решает когда включать анализ медиа через Gemini. При запуске с несколькими ключами он стоит по умолчанию. 

![][image5]  
Если нужно получить весь актив по 10+ фразам модель отрубит параметр  «analyze\_media». 

В конце отфильтрованные данные сохраняются локально в JSON. Если первый раз ищем в новом ГЕО, скрипт создаст новый файл, если раньше искали, запишет в старый. Независимо от направления одна страна  —  один набор. 

### Поиск без ограничения количества объяв — экономит Scrapecreators

**Экономичный сценарий: запрашиваем объявления по фразе Х:**

- IDE запускает поиск со стандартным размером пачки;  
- параметр max\_ads (ограничитель) не устанавливается;  
- скрипт просит 100 объявлений (по умолчанию), платит 1 кредит Scrapecreators;  
- приходит 100 сырых данных;   
- фильтрует их в несколько этапов;  
- все что прошло проверку — сохраняет. Выброшенных кампаний нет. 

**Расточительный: вы просите суммарно 100 объявлений:**

- агент запросит с запасом чтобы получить 100 подходящих;   
- скачает пачку объектов, например 500 по 5 ключам — это 5 обращений;  
- за каждый запрос спишется по 1 кредиту;   
- запустится многошаговая фильтрация которая найдет среди них первые 100 подходящих и остановится;  
- оставшиеся 100-400 необработанных данных, за которые заплачены кредиты Scrapecreators, отбрасываются.

Непроверенную рекламу можно отдельно сохранять с фильтрацией без Gemini. Или смотреть наличие параметров трекера и затем сохранять. Вариаций много, но это  вопрос предпочтений. 

Любая работа над остатком реализуется за 1 промпт агенту в IDE. Если даже вы не кодер просто скажите «запиши отдельно» или «делай отметку что не чекали и кидай в тот же файл» ИИ добавит 2-5 строк в двух файлах и внедрит нужный функционал.  

## Почему именно Antigravity

Основная причина по которой в первую очередь показали  сборку под Anti —  он **не достает лимитами.** Мы установили приложение сразу после выхода, авторизовались через аккаунт с минимальной подпиской One. Больше 3 недель он работал 5-8 часов каждые сутки и ни разу не уперся в ограничения. 

Пробной подписки после линковки карты, которая предлагается на части Google-профилей, хватает для полноценного использования последних моделей Gemini и Claude. Google предлагает оформить тариф AI, но One тоже подходит. Бонусом дополнительно получаем доступ к последним мультимедиа генераторам и полный функционал [google.vids](https://docs.google.com/videos/). Триал также в разы шире чем у любого конкурента. 

![][image6]  
Gemini и Claude доступны сразу после установки. Когда заканчивается лимит по одной модели, можно переключиться на другую и продолжить работу. 

## Куда еще можно установить MySpy

Gemini Cli, Jools  
Версию для Cursor и Claude покажем в следующей части статьи. Если у вас есть предложения по кастомизации которые будут полезны для широкой аудитории пишите в канал. 

## 

## Какие ключи требуются

Чтобы получить ключи от библиотеки Цукера нужны очень качественные доки и «Феликс Фелицис» из Гарри Поттера. Вместо API Key из Ads Library во всех MCP в этой статье используется [ScrapeCreators](https://app.scrapecreators.com/). 

[По оф. документации ScrapeCreators](https://scrapecreators.com/facebook-api), он также ищет в реальном времени. Когда вы отправляете запрос (например, «active ads prostate»), ScrapeCreators в этот же момент отправляет ботов в официальную библиотеку рекламы. Если кампанию запустили 5 минут назад, и она прошла модерацию — SС её увидит.

Gemini ApiKey: нужна подписка. Фришки не хватит даже на пару полноценных сессий на 1000+ кампаний.

Чтобы экономить, запускайте сервер с ключевыми фразами из 2-3 слов. Чем короче запрос, тем больше мусора. Количество сырых данных по одному слову конечно будет превышать в разы, но все это нужно еще проверить. Кому не жалко лимитов Gemini берите короткий вариант. 

## Больше чем SPY

Этот инструмент изучит актив и подскажет какой оффер чаще льется по любому из направлений нутры. 

Можно вбить просто названия офферов под потенцию и MCP найдет активные объявления и укажет сколько кампаний на какой продукт запущено. 

## Заключение 

Процесс который занимал несколько часов занимает 10 минут. Такое приложение полностью избавляет от необходимости заходить в Ads Library и искать вручную, перебирать кучу говна и мусора, ставить расширения. 

Приложение из статьи пересобирал автор который никогда не писал на питоне. Не нужно быть кодером чтобы внедрить кастомные MCP закрывающие задачи команды. 

Функционал не ограничен и даже создание приложения может стать творческим процессом. Захотели, сформировали ТЗ и получили новую функцию. 

Самый главный плюс такое решение — полностью кастомное и даже не программист может создать на его базе спай который будет работать ровно так как он хочет. Когда агент не находит функционал внутри MCP, он создает его сам за 5-20 секунд и в течении минуты уже показывает результат. 

К примеру захотели пройтись по всем «external\_links» запросом HTTP и проверить нутра ли по ссылке, пишем агенту критерии отбора и и краткое ТЗ до 2-3 предложений. Он меньше чем за минуту создаст новое приложение которое которое отправляет всем найденным внешним ссылкам HTTP запрос и проверяет содержание. Так можно выделить все, что льется без клоаки и подвинуть вверх в файле и заодно удалить явный мусор. 
